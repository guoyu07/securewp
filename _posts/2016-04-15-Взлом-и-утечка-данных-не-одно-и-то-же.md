---
layout: post
title: Взлом и утечка данных — не одно и то же
date: 2016-04-15
category: infosec
tags: [chmod, Docker, Exchange 2010 server, Microsoft, Mossack Fonseca, PanamaGate, panamapapers, www-data, Панамский скандал, Панамское досье]
canonical: https://securemywp.ru/2016/04/15/взлом-и-утечка-данных-не-одно/
---

Итак, в установке вордпресса юридической компании *Mossack Fonseca*, оперирующей огромным массивом конфиденциальных данных своих клиентов, оказался уязвимый плагин. Случайно или целенаправленно злоумышленник, кем бы он ни был, сумел этим воспользоваться и разместил во временной директории плагина <code>/wp-content/plugins/revslider/tmp</code> свой <code>php</code>-код. Что дальше?

Дальше можно сделать что угодно… хотя, нет. Вопрос — с какими правами? Скорее всего, если все правильно настроено, то лишь с правами, данными веб-серверу, точнее назначенному ему пользоваелю, скорее всего <code>www-data</code>. В правильном случае, это должно быть не так и много. Доступа к данным пользователей, таким как документы и почта, у веб-сервера не должно быть.

В случае с _Mossack Fonseca_ в одной сети располагалось несколько сервисов, в том числе почтовый сервер <code>Exchange 2010 server</code>. Доступ к этому у веб-сервера был, поскольку осуществлялся через веб-интерфейс в пределах одной сети. Чтобы представить, как дальше мог быть получен доступ ко всей переписке клиентов, достаточно взглянуть на [список уязвимостей](https://www.cvedetails.com/vulnerability-list/vendor_id-26/product_id-194/Microsoft-Exchange-Server.html) почтового сервера от *Microsoft*.

Отсюда два вывода. Во-первых, надо по возможности разделять сервисы, не хранить критические данные там, где к ним легко получить доступ из веба. Сейчас для разделения есть удобное средство — контейнеризация  (_Docker_). Во-вторых, внимательно следить за правами доступа. Выставлять их, по возможности, ниже достаточных, при необходимости повышать.

Кое-что на эту тему еще будет…

…[вся ветка]().
